<!DOCTYPE html>
<html lang="en">
	<head>
		<title>King Classic: Upload Photos</title>
		<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
		<meta charset="UTF-8">
	  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js">
    </script>

    <script>
      $(document).ready(function() {
          $("#fileUpload").on('change', function() {
            //Get count of selected files
            var countFiles = $(this)[0].files.length;
            var imgPath = $(this)[0].value;
            var extn = imgPath.substring(imgPath.lastIndexOf('.') + 1).toLowerCase();
            var image_holder = $("#image-holder");
            image_holder.empty();
            if (extn == "gif" || extn == "png" || extn == "jpg" || extn == "jpeg") {
              if (typeof(FileReader) != "undefined") {
                //loop for each file selected for uploaded.
                for (var i = 0; i < countFiles; i++)
                {
                  var reader = new FileReader();
                  reader.onload = function(e) {
                    $("<img />", {
                      "src": e.target.result,
                      "class": "img-responsive",
                      "width": "400"
                    }).appendTo(image_holder);
                  }
                  image_holder.show();
                  reader.readAsDataURL($(this)[0].files[i]);
                }
              } else {
                alert("This browser does not support FileReader.");
              }
            } else {
              alert("Please select only images");
            }
          });
        });
    </script>
	</head>

	<body>
    <h2>Upload Photos</h2>
    <form action="/upload_pic" method="POST" enctype="multipart/form-data" id="form-submit">
      <input id="fileUpload" type="file" name="file">
      <br>
      <div id="image-holder" class="img-responsive" align="center"></div>
      <br>
      <input type="submit" value="Submit"/>
    </form>
    <p>{{msg|safe}}</p>
    <h4><a href="{{ url_for('index') }}">Home</a></h4>
  </body>
</html>
